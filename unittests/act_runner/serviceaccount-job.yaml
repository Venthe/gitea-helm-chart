suite: actions template | serviceaccount-job
release:
  name: gitea-unittests
  namespace: testing
templates:
  - templates/gitea/act_runner/serviceaccount-job.yaml
tests:
  - it: renders a ServiceAccount
    template: templates/gitea/act_runner/serviceaccount-job.yaml
    set:
      actions:
        job:
          enabled: true
    asserts:
      - hasDocuments:
          count: 1
      - containsDocument:
          kind: ServiceAccount
          apiVersion: v1
          name: gitea-unittests-actions-token-job
